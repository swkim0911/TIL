# OSI 모델과 TCP/IP 모델
OSI 모델은 데이터 통신이 어떻게 동작해야 하는지 설명하는 7개 계층으로 구성된 이론적 구조이고, TCP/IP 모델은 실제 네트워킹에서 사용되는 4개 계층으로 구성된 실질적인 모델이다.

## OSI 모델
OSI(Open Systems Interconnection) 모델은 네트워크 통신을 일곱 개의 추상 계층으로 나누어 표현한 개념적 참조 모델로, 시스템 간 상호 운용성(Interoperability)을 이해하는 데 사용된다.

> 상호 운용성이란 서로 다른 시스템, 장치, 애플리케이션이 별도의 조치 없이도 함께 정보를 주고 받고, 이해하고, 활용할 수 있는 특성이다.

물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 응용 계층, 총 7개 계층으로 구성되어 있으며, 각 계층은 독립적으로 수행한다.

### OSI 모델의 7가지 계층
#### 🔹 layer 7: 애플리케이션 계층
최종 사용자와 가장 가까운 계층이다. 사용자 애플리케이션에 직접 네트워크 서비스를 제공하며, API 엔드포인트(요청/응답)에서 일어나는 동작을 하위 계층이 실제 전송 가능한 데이터 단위로 변환하고 전달하는 과정을 연결(중개)해 준다.(It facilitates communication between API endpoints and lower layers of the OSI model)

애플리케이션 자체는 이 계층에 속하지 않으며 소프트웨어가 데이터를 주고 받을 수 있는 프로토콜(HTTP, FTP)을 제공한다.

#### 🔹 layer 6: 프레젠테이션 계층
애플리케이션 계층이 네트워크를 통해 데이터를 전송할 수 있도록 해당 데이터를 적절한 형식으로 변환한다. 또한, SSL/TLS 프로토콜, JPEG 프로토콜(이미지 압축), MPEG 프로토콜(동영상 압축)을 지원한다. 

#### 🔹 layer 5: 세션 계층
두 대 이상의 컴퓨터 간의 세션이라 불리는 연결을 설정하고, 이를 관리 및 종료하는 프로세스인 세션 관리를 담당한다. 세션 계층은 로컬 애플리케이션과 원격 애플리케이션 간의 연결을 시작하고, 필요한 데이터를 전송하는 데 충분한 시간 동안 세션을 유지하며, 전송이 완료되면 세션을 종료해 네트워크 리소스를 보관한다.

> 웹 브라우저의 세션과 구분지어, OSI 7계층에서 말하는 세션은 더 일반적인 통신 대화 단위를 뜻한다. 두 장치 간에 연결을 맺고, 대화를 유지하고, 종료하는 과정 전체를 하나의 "세션"이라고 부른다. 즉, 두 장치 간 논리적 대화/연결 단위를 말한다.

#### 🔹 layer 4: 전송 계층
TCP(Transfer Control Protocol) 및 UDP(User Datagram Protocol) 등의 프로토콜을 하여 전체 메시지의 엔드투엔드(end-to-end) 전송을 관리한다. 전송 계층은 세션 계층에서 메시지를 가져와서 각 메시지를 세그먼트(segment)라는 더 작은 단위로 분할하고, 각 세그먼트에 고유한 헤더를 추가한다. 수신 측에서는 전송 계층이 세그먼트를 올바른 순서로 재조립하여 원본 메시지를 복원한다.

> 추가되는 헤더 정보: 출발지/목적지 포트 번호

#### 🔹 layer 3: 네트워크 계층
서로 다른 네트워크에서 한 노드에서 다른 노드로의 데이터 전송을 원활하게 하는 역할을 담당한다. 노드 간 데이터를 전송하기 위한 최적의 경로(라우팅)를 결정한다. 세그먼트에 IP 헤더를 붙여 '패킷'으로 캡슐화해서 전송하고, 수신 측에서 조립한다.

> 세그먼트가 너무 커서 MTU(Maximum Transmission Unit)를 초과하면 여러 '패킷' 단위로 분할한다. 이를 단편화(Fragmentation)이라고 한다.

> MTU: 데이터 링크 계층에서 한 번에 전송할 수 있는 최대 데이터 크기. 즉, 프레임의 페이로드(상위 계층에서 내려온 데이터, 보통은 IP 패킷)가 가질 수 있는 최대 크기이다.

네트워크 계층은 신뢰성이 보장되지 않을 수 있다.

> 네트워크는 고유 주소를 가진 여러 노드가 연결되는 매개체로 기능하며 목적지 주소를 기반으로 다른 네트워크 노드로 메시지를 전송할 수 있다.

#### 🔹 layer 2: 데이터 링크 계층
동일한 네트워크 내에서 여러 디바이스 간의 오류 없는 데이터 전송을 관리한다.

#### 🔹 layer 1: 물리 계층
장치(커넥터, 광섬유 케이블, 라우터)와 물리적 매체(WI-FI) 간에 원시 데이터(1,0 비트)를 전송하는 물리적 네트워크 구성 요소로 이루어져 있다.

### OSI 모델에서의 데이터 흐름
OSI 모델에서의 데이터 흐름은 송신 측에서 각 계층마다 데이터를 캡슐화하고, 네트워크를 통해 전송한 뒤, 수신 측에서 각 계층마다 이를 비캡슐화하여 데이터가 의도된 목적지에 도달하도록 하는 과정을 의미한다.


## TCP/IP 모델
실제 네트워크에서 광범위하게 사용되고 직접 구현되는 표준 프로토콜을 기반으로 한다. OSI 모델이 7계층으로 구성된 데 반해 4계층이며, 각 모델은 OSI 모델의 하나 이상의 계층에 해당한다.

### TCP/IP 모델 4 계층

#### 🔹 layer 4: 애플리케이션 계층
OSI 모델의 세션, 프레젠테이션, 애플리케이션 계층을 포함한다.

#### 🔹 layer 3: 전송 계층
OSI 모델의 전송 계층과 동일한 역할을 수행한다.

#### 🔹 layer 2: 인터넷 계층
OSI 모델의 네트워크 계층과 동일한 역할을 수행한다.

#### 🔹 layer 1: 네트워크 액세스 계층
OSI 모델의 데이터 링크, 물리적 계층을 포함한다.

### TCP/IP 모델에서 데이터 흐름
TCP/IP 모델에서 데이터 흐름은 송신 측에서 응용 계층 데이터가 내려오면서 각 계층별로 헤더가 붙고, 수신측에서는 역순으로 헤더가 제거되는 캡슐화와 비캡슐화 과정으로 설명할 수 있다.

송신 측에서는 먼저 응용 계층에서 생성된 데이터가 전송 계층으로 전달되고, 여기서 세그먼트로 쪼개지며 TCP/UDP 헤더가 붙는다. 그 다음 인터넷 계층에서 IP 헤더가 추가되면서 패킷이 되고, 네트워크 액세스 계층에서는 MAC 주소와 FCS 같은 정보가 붙어 프레임이 된다. 이 프레임이 실제 전기적 신호로 변환되어 네트워크를 통해 전송된다.

> FCS(Frame Check Sequence): 데이터 링크 계층의 프레임 트레일러에 포함되는 필드. 전송 중 오류 검출을 위해 사용되는 체크값이다. 송신 측에서 프레임의 데이터 부분을 대상으로 CRC(Cyclic Redundancy Check) 연산을 수행해 FCS 값을 붙여 보낸다. 수신 측은 같은 방식으로 CRC를 계산해서 FCS와 비교해 오류를 판단한다.

수신 측에서는 반대로, 네트워크 액세스 계층에서 신호를 프레임으로 복원하고 MAC 주소와 오류를 확인한 뒤, 그 안에서 패킷을 꺼내 인터넷 계층으로 전달한다. 인터넷 계층은 IP 주소를 확인한 후 세그먼트를 전송 계층으로 넘기고, 전송 계층은 포트 번호와 순서를 확인해 데이터를 재조립한다. 마지막으로 응용 계층에 원래 데이터가 도착해 사용자가 볼 수 있는 형태로 제공된다.

### 참고
- [Difference Between OSI Model and TCP/IP Model](https://www.geeksforgeeks.org/computer-networks/difference-between-osi-model-and-tcp-ip-model)

- [What is the OSI Model?](https://www.ibm.com/kr-ko/think/topics/osi-model)

- chatGPT