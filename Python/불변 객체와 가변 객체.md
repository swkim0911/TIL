# 불변 객체와 가변 객체
파이썬에서는 모든 변수는 객체 인스턴스 값을 참조하며 객체는 불변 객체와 가변 객체로 나뉜다. 객체가 인스턴스화될 때 타입은 런타임에 정의되며 이후에 변경할 수 없지만, 객체가 가변 객체라면 그 상태는 변경될 수 있다.

## 불변 객체
불변 객체란 메모리 안에 담겨 있는 값이 언제나 변하지 않는 객체를 의미한다. 불변 객체의 종류로는 아래와 같다.
- 정수(int)
- 불리언(boolean)
- 실수(float)
- 문자열(string)
- 튜플(tuple)
- range

## 가변 객체
가변 객체는 메모리 안에 담겨 있는 값이 변할 수 있는 객체를 의미한다. 개변 객체의 종류로는 아래와 같다.
- 리스트(list)
- 집합(set)
- 딕셔너리(dictionary)

## 주의할 점
#### 1. 대입(=)은 복사가 아니라 참조 전달
```
a = [1,2,3]
b = a
b.append(4)
print(a) # [1,2,3,4]
```
- `b = a`는 리스트를 새로 복사하는 게 아니라 객체를 참조한다.
- 따라서 한쪽에서 값을 바꾸면 다른 변수에도 반영되므로 가변 객체에서 주의해야 한다.

#### 2. 불변 객체의 값을 변경하면 새로운 객체가 생성된다.
```
name = 'Aiden'
print(id(name)) # 4298995536
name = name + ' Kim'
print(id(name)) # 4299855408
```
- 문자열, 정수 같은 불변 객체는 수정하려 하면 새로운 객체를 생성하고 변수는 그 객체를 가리킨다.
- 즉, '=' 연산자는 할당 연산자의 개념에 더 가깝지, 데이터를 변화시키는 개념은 아니다.

#### 3. 함수 기본 인자(default argument)에서의 함정
```
def make_arr_with_x(x, arr=[]):
    arr.append(x)
    return arr
print(make_arr_with_x(1)) # [1]
print(make_arr_with_x(2)) # [1, 2]
```
- **함수 기본 인자의 값은 "호출 시점"이 아니라 "정의 시점"에 한 번만 평가된다.**
- 그래서 가변 객체를 기본 인자로 두면, 모든 호출이 그 하나의 객체를 공유한다.

```
def foo(x, text="abc"):
    return text+x

print(foo("d")) # "abcd"
print(foo("e")) # "abce"
```
- 함수의 기본 인자가 불변 객체일 경우, 값을 변경하는 대신 새로운 값을 생성하므로 문제가 발생하지 않는다.


### 참고
- [Mutable vs Immutable Objects in Python](https://www.geeksforgeeks.org/python/mutable-vs-immutable-objects-in-python/)
- [가변, 불변(mutable, immutable)에 대한 모든 것](https://0xffffffff.tistory.com/75)