# ITEM 10. equals는 일반 규약을 지켜 재정의하라
꼭 필요한 경우가 아니면 equals() 함수를 재정의 하지 않는게 좋다. 재정의해야 할 때는 다음 세 가지 규약을 지켜야 한다. 규약을 지키지 못하면 대상 클래스가 이 규약을 준수한다고 가정하는 클래스(HashMap, HashSet)를 오작동하게 만든다.

1. 대칭성: null 이 아닌 모든 참조 값 x,y에 대해, x.equals(y)가 true 이면 y.equals(x) 도 true 이다.
2. 추이성: null 이 아닌 모든 참조 값 x,y,z에 대해, x.equals(y)가 true 이면 y.equals(z), x.equals(z) 도 true 이다.
3. 일관성: null 이 아닌 모든 참조 값 x,y에 대해, x.equals(y)를 반복해서 호출하면 항상 true를 반환하거나 항상 false를 반환한다.

equals 메서드를 재정의 하는 경우 다음과 같은 단계를 따르면 된다. 그리고 나중에 코드가 변경될 것을 대비해 테스트 코드를 작성해 둔다.

1. == 연산자를 사용해 입력이 자기 자신의 참조인지 확인한다.
2. instanceof 연산자로 입력이 올바른 타입인지 확인한다.
3. 입력을 올바른 타입으로 형변환한다.
4. 입력 객체와 자기 자신이 갖는 핵심 필드들이 모두 일치하는지 검사한다.

이런 작업을 대신해줄 오픈소스로 AutoValue 나 Lombok의 @equalsandhashcode 이 있다.